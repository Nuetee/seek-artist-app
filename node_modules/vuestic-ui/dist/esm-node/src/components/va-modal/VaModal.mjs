var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,t,a)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,__spreadValues=(e,o)=>{for(var t in o||(o={}))l.call(o,t)&&__defNormalProp(e,t,o[t]);if(a)for(var t of a(o))s.call(o,t)&&__defNormalProp(e,t,o[t]);return e};import{w as n}from"../../services/config-transport/withConfigTransport.mjs";import{defineComponent as r,h as i,Transition as d,shallowRef as c,toRef as m,computed as u,watch as p,resolveComponent as f,openBlock as y,createElementBlock as v,normalizeClass as g,renderSlot as b,normalizeProps as k,guardReactiveProps as h,createCommentVNode as C,createBlock as x,Teleport as _,createVNode as $,mergeProps as T,withCtx as B,normalizeStyle as S,createElementVNode as E,withKeys as O,Fragment as w,toDisplayString as j,createTextVNode as A}from"vue";import"../../../vendor.mjs";import{u as L}from"../../composables/useColors.mjs";import"../../composables/usePopover.mjs";import{u as D,a as z,b as P}from"../../composables/useStateful.mjs";import{u as V}from"../../composables/useTextColor.mjs";import{V as I}from"../va-button/index.mjs";import{V as H}from"../va-icon/index.mjs";import{_ as M}from"../../../plugin-vue_export-helper.mjs";const W=r({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:t})=>()=>{var a;return e.isTransition?i(d,__spreadValues({},t),o):null==(a=o.default)?void 0:a.call(o,t)}}),K=r({name:"VaModal",inheritAttrs:!1,components:{VaButton:I,VaIcon:H,ModalElement:W},emits:[...D,"cancel","ok","before-open","open","before-close","close","click-outside"],props:(N=__spreadValues({},z),F={modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String]},backgroundColor:{type:String,default:"white"},noPadding:{type:Boolean,default:!1}},o(N,t(F))),setup(e,{emit:o}){const t=c(),{getColor:a}=L(),{textColorComputed:l}=V(m(e,"backgroundColor")),{valueComputed:s}=P(e,o),n=u((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,"va-modal--no-padding":e.noPadding,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),r=u((()=>({"z-index":e.zIndex}))),i=u((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:l.value,background:a(e.backgroundColor)}))),d=u((()=>{const o=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!o)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{s.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const t=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==t||cancel()}))};p(s,(o=>{o?window.addEventListener("keyup",listenKeyUp):window.removeEventListener("keyup",listenKeyUp),e.blur&&(o?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}),{immediate:!0});const f={show:()=>{s.value=!0},hide:hide,toggle:()=>{s.value=!s.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return __spreadValues({getColor:a,rootElement:t,valueComputed:s,computedClass:n,computedDialogStyle:i,computedModalContainerStyle:r,computedOverlayStyles:d},f)}});var N,F;const q=["aria-labelledby"],U={key:0,class:"va-modal__anchor"},G={key:0,class:"va-modal"},J={key:0},Q={key:1,class:"va-modal__header"},R={key:2,class:"va-modal__message"},X={key:3,class:"va-modal__message"},Y={key:4,class:"va-modal__footer"},Z={key:5,class:"va-modal__footer"};const ee=n(M(K,[["render",function _sfc_render(e,o,t,a,l,s){const n=f("va-icon"),r=f("va-button"),i=f("modal-element");return y(),v("div",{ref:"rootElement",class:g(["va-modal-entry",e.$props.anchorClass]),role:"dialog","aria-modal":"true","aria-labelledby":e.title},[e.$slots.anchor?(y(),v("div",U,[b(e.$slots,"anchor",k(h({show:e.show,hide:e.hide,toggle:e.toggle})))])):C("",!0),(y(),x(_,{to:e.attachElement,disabled:e.$props.disableAttachment},[$(i,T({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs,{onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition}),{default:B((()=>[e.valueComputed?(y(),v("div",G,[e.$props.overlay?(y(),v("div",{key:0,class:"va-modal__overlay",style:S(e.computedOverlayStyles),onClick:o[0]||(o[0]=(...o)=>e.onOutsideClick&&e.onOutsideClick(...o))},null,4)):C("",!0),E("div",{class:"va-modal__container",style:S(e.computedModalContainerStyle)},[E("div",{class:g(["va-modal__dialog",e.computedClass]),style:S(e.computedDialogStyle)},[e.$props.fullscreen?(y(),x(n,{key:0,name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0",onClick:e.cancel,onKeydown:[O(e.cancel,["space"]),O(e.cancel,["enter"])]},null,8,["onClick","onKeydown"])):C("",!0),E("div",{class:"va-modal__inner",style:S({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.$slots.content?(y(),v("div",J,[b(e.$slots,"content",k(h({cancel:e.cancel,ok:e.ok})))])):C("",!0),e.$slots.content?C("",!0):(y(),v(w,{key:1},[e.title?(y(),v("div",{key:0,class:"va-modal__title",style:S({color:e.getColor("primary")})},j(e.$props.title),5)):C("",!0),e.$slots.header?(y(),v("div",Q,[b(e.$slots,"header")])):C("",!0),e.$props.message?(y(),v("div",R,j(e.$props.message),1)):C("",!0),e.$slots.default?(y(),v("div",X,[b(e.$slots,"default")])):C("",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?C("",!0):(y(),v("div",Y,[e.$props.cancelText?(y(),x(r,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:B((()=>[A(j(e.$props.cancelText),1)])),_:1},8,["onClick"])):C("",!0),$(r,{onClick:e.ok},{default:B((()=>[A(j(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(y(),v("div",Z,[b(e.$slots,"footer")])):C("",!0)],64))],4)],6)],4)])):C("",!0)])),_:3},16,["isTransition","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],8,["to","disabled"]))],10,q)}]]));export{ee as V};
//# sourceMappingURL=VaModal.mjs.map

 import './VaModal.css'