{"version":3,"file":"VaPagination.mjs","sources":["../../../../../src/components/va-pagination/VaPagination.vue"],"sourcesContent":["<template>\n  <va-button-group\n    v-if=\"showPagination\"\n    class=\"va-pagination\"\n    :flat=\"$props.flat\"\n    :size=\"$props.size\"\n    :color=\"$props.color\"\n    outline\n    @keydown.left.stop=\"onUserInput(currentValue - 1)\"\n    @keydown.right.stop=\"onUserInput(currentValue + 1)\"\n  >\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      aria-label=\"go first page\"\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.boundaryIconLeft\"\n      @click=\"onUserInput(1)\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      aria-label=\"go prev page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === 1\"\n      :icon=\"$props.directionIconLeft\"\n      @click=\"onUserInput(currentValue - 1)\"\n    />\n    <slot v-if=\"!$props.input\">\n      <va-button\n        v-for=\"(n, i) in paginationRange\"\n        :key=\"i\"\n        class=\"va-pagination__numeric-button\"\n        outline\n        :aria-label=\"`go to ${n} page`\"\n        :aria-current=\"n === currentValue\"\n        :style=\"activeButtonStyle(n)\"\n        :disabled=\"$props.disabled || n === '...'\"\n        :class=\"{ 'va-button--ellipsis': n === '...'}\"\n        @click=\"onUserInput(n)\"\n      >\n        {{ n }}\n      </va-button>\n    </slot>\n    <input\n      v-else\n      ref=\"htmlInput\"\n      class=\"va-pagination__input va-button\"\n      aria-label=\"enter the page number to go\"\n      v-model=\"inputValue\"\n      :disabled=\"$props.disabled\"\n      :placeholder=\"`${currentValue}/${lastPage}`\"\n      :style=\"inputStyleComputed\"\n      :class=\"{ 'va-pagination__input--flat': $props.flat }\"\n      @keydown.enter=\"changeValue\"\n      @focus=\"focusInput\"\n      @blur=\"changeValue\"\n    />\n    <va-button\n      v-if=\"showDirectionLinks\"\n      aria-label=\"go next page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.directionIconRight\"\n      @click=\"onUserInput(currentValue + 1)\"\n    />\n    <va-button\n      v-if=\"showBoundaryLinks\"\n      aria-label=\"go last page\"\n      outline\n      :disabled=\"$props.disabled || currentValue === lastPage\"\n      :icon=\"$props.boundaryIconRight\"\n      @click=\"onUserInput(lastPage)\"\n    />\n  </va-button-group>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch, PropType, ref, computed, nextTick, shallowRef } from 'vue'\n\nimport { __DEV__ } from '../../utils/global-utils'\nimport { useColors, useTextColor, useStateful, useStatefulProps, useStatefulEmits } from '../../composables'\nimport { setPaginationRange } from './setPaginationRange'\n\nimport { VaButtonGroup } from '../va-button-group'\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaPagination',\n  components: { VaButtonGroup, VaButton },\n  emits: useStatefulEmits,\n  props: {\n    ...useStatefulProps,\n    modelValue: { type: Number, default: 1 },\n    visiblePages: { type: Number, default: 0 },\n    pages: { type: Number, default: 0 },\n    disabled: { type: Boolean, default: false },\n    color: { type: String, default: 'primary' },\n    size: {\n      type: String as PropType<'medium' | 'small' | 'large'>,\n      default: 'medium',\n      validator: (v: string) => ['medium', 'small', 'large'].includes(v),\n    },\n    boundaryLinks: { type: Boolean, default: true },\n    boundaryNumbers: { type: Boolean, default: false },\n    directionLinks: { type: Boolean, default: true },\n    input: { type: Boolean, default: false },\n    hideOnSinglePage: { type: Boolean, default: false },\n    flat: { type: Boolean, default: false },\n    total: { type: Number, default: null },\n    pageSize: { type: Number, default: null },\n    boundaryIconLeft: { type: String, default: 'first_page' },\n    boundaryIconRight: { type: String, default: 'last_page' },\n    directionIconLeft: { type: String, default: 'chevron_left' },\n    directionIconRight: { type: String, default: 'chevron_right' },\n  },\n\n  setup (props, { emit }) {\n    const htmlInput = shallowRef<HTMLInputElement>()\n\n    const inputValue = ref('')\n\n    const usedTotal = computed(() => !!((props.total || props.pageSize === 0) && props.pageSize))\n\n    const { valueComputed } = useStateful<number>(props, emit)\n\n    const { textColorComputed } = useTextColor()\n\n    const currentValue = computed({\n      get: () => usedTotal.value ? Math.ceil(valueComputed.value / props.pageSize) || 1 : valueComputed.value,\n      set: (value) => { valueComputed.value = value },\n    })\n\n    const paginationRange = computed(() => {\n      const { visiblePages, total, pageSize, boundaryNumbers, pages } = props\n\n      const value = currentValue.value || 1\n      const totalPages = usedTotal.value ? Math.ceil(total / pageSize) : pages\n\n      return setPaginationRange(value, visiblePages, totalPages, boundaryNumbers)\n    })\n\n    const lastPage = computed(() => usedTotal.value ? Math.ceil(props.total / props.pageSize) || 1 : props.pages)\n\n    const IsLstPageNotVisible = computed(() => (!!props.visiblePages && lastPage.value > props.visiblePages))\n\n    const showBoundaryLinks = computed(() => {\n      const { boundaryLinks, boundaryNumbers, input } = props\n\n      return input || (IsLstPageNotVisible.value && boundaryLinks && !boundaryNumbers)\n    })\n\n    const showDirectionLinks = computed(() => props.input || (IsLstPageNotVisible.value && props.directionLinks))\n\n    const showPagination = computed(() => lastPage.value > 1 || (!props.hideOnSinglePage && lastPage.value <= 1))\n\n    const focusInput = () => {\n      inputValue.value = `${currentValue.value}`\n\n      nextTick(() => htmlInput.value?.setSelectionRange(0, htmlInput.value.value.length))\n    }\n\n    const onUserInput = (pageNum: number | '...') => {\n      if (pageNum === '...' || pageNum < 1 || pageNum > lastPage.value) { return }\n\n      currentValue.value = usedTotal.value ? (pageNum - 1) * props.pageSize + 1 : pageNum\n    }\n\n    const resetInput = () => {\n      inputValue.value = ''\n      htmlInput.value?.blur()\n    }\n\n    const changeValue = () => {\n      if (+inputValue.value === currentValue.value) {\n        resetInput()\n      }\n\n      if (!inputValue.value.length) { return }\n\n      let pageNum = Number.parseInt(inputValue.value)\n\n      switch (true) {\n        case pageNum < 1:\n          pageNum = 1; break\n        case pageNum > lastPage.value:\n          pageNum = lastPage.value; break\n        case isNaN(pageNum):\n          pageNum = currentValue.value; break\n        default: break\n      }\n\n      onUserInput(pageNum)\n      resetInput()\n    }\n\n    const { getColor } = useColors()\n\n    const activeButtonStyle = (buttonValue: number | '...') => {\n      if (buttonValue === currentValue.value) {\n        return {\n          backgroundColor: getColor(props.color),\n          color: textColorComputed.value,\n        }\n      }\n\n      return {\n        color: getColor(props.color),\n      }\n    }\n\n    const inputStyleComputed = computed(() => ({\n      cursor: 'default',\n      color: getColor(props.color),\n      opacity: props.disabled ? 0.4 : 1,\n    }))\n\n    watch([usedTotal, () => props.pages], () => {\n      if (__DEV__ && usedTotal.value && props.pages) {\n        throw new Error('Please, use either `total` and `page-size` props, or `pages`.')\n      }\n    })\n\n    return {\n      currentValue,\n      lastPage,\n      changeValue,\n      inputValue,\n      showPagination,\n      showBoundaryLinks,\n      onUserInput,\n      activeButtonStyle,\n      showDirectionLinks,\n      paginationRange,\n      focusInput,\n      inputStyleComputed,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-pagination {\n  font-family: var(--va-font-family);\n\n  &__input {\n    border-style: var(--va-pagination-input-border-style);\n    border-width: var(--va-pagination-input-border-width);\n    text-align: var(--va-pagination-input-text-align);\n    font-size: var(--va-pagination-input-font-size);\n\n    &--flat {\n      border-top-width: var(--va-pagination-input-flat-border-top-width);\n    }\n  }\n\n  &__numeric-button {\n    &.va-button {\n      .va-button__content {\n        // Remove paddings from button content\n        padding: 0;\n        justify-content: center;\n      }\n\n      // Add paddings to button content in min-width\n      &--normal {\n        .va-button__content {\n          min-width: calc(var(--va-button-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n\n      &--small {\n        .va-button__content {\n          min-width: calc(var(--va-button-sm-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n\n      &--large {\n        .va-button__content {\n          min-width: calc(var(--va-button-lg-content-px) * 2 + var(--va-pagination-button-content-width));\n        }\n      }\n    }\n  }\n\n  .va-button {\n    &.va-input {\n      cursor: default;\n    }\n\n    &--ellipsis {\n      cursor: default;\n      opacity: 1;\n    }\n\n    &--ellipsis > .va-button__content {\n      opacity: 0.4;\n    }\n\n    &--outline.va-button--disabled {\n      opacity: 1;\n    }\n\n    &--outline.va-button--disabled > .va-button__content {\n      opacity: 0.4;\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","VaButtonGroup","VaButton","emits","useStatefulEmits","props","useStatefulProps","modelValue","type","Number","default","visiblePages","pages","disabled","Boolean","color","String","size","validator","v","includes","boundaryLinks","boundaryNumbers","directionLinks","input","hideOnSinglePage","flat","total","pageSize","boundaryIconLeft","boundaryIconRight","directionIconLeft","directionIconRight","setup","emit","htmlInput","shallowRef","inputValue","ref","usedTotal","computed","valueComputed","useStateful","textColorComputed","useTextColor","currentValue","get","value","Math","ceil","set","paginationRange","totalPages","setPaginationRange","lastPage","IsLstPageNotVisible","showBoundaryLinks","showDirectionLinks","showPagination","onUserInput","pageNum","resetInput","_a","blur","getColor","useColors","inputStyleComputed","cursor","opacity","watch","changeValue","length","parseInt","isNaN","activeButtonStyle","buttonValue","backgroundColor","focusInput","nextTick","setSelectionRange","_ctx","openBlock","_createBlock","_component_va_button_group","key","class","$props","outline","onKeydown","_cache","_withKeys","_withModifiers","$event","_component_va_button","icon","onClick","_createCommentVNode","_createElementBlock","_normalizeClass","placeholder","style","_normalizeStyle","args","onFocus","onBlur","_hoisted_1","_renderSlot","$slots","_openBlock","_Fragment","_renderList","n","i","_createTextVNode","_toDisplayString"],"mappings":"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"}