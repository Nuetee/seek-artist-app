var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,a,t)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t,__spreadValues=(e,o)=>{for(var a in o||(o={}))r.call(o,a)&&__defNormalProp(e,a,o[a]);if(t)for(var a of t(o))n.call(o,a)&&__defNormalProp(e,a,o[a]);return e},__spreadProps=(e,t)=>o(e,a(t));import{defineComponent as s,shallowRef as l,ref as i,toRefs as p,computed as u,watch as d,nextTick as c,resolveComponent as m,openBlock as v,createElementBlock as f,createVNode as y,normalizeClass as b,normalizeStyle as w,withCtx as k,renderSlot as V,normalizeProps as h,guardReactiveProps as g,mergeProps as D,withKeys as C,withModifiers as P,createSlots as j,createElementVNode as I,toHandlers as x,createBlock as O,createCommentVNode as _,renderList as $}from"vue";import{o as S}from"../../../vendor.mjs";import{e as F,a as A,f as B}from"../../utils/child-props.mjs";import{u as T,a as W,b as K}from"../../composables/useClearable.mjs";import"colortranslator";import{u as L,a as E}from"../../composables/useFocus.mjs";import{u as H}from"../../composables/useParsable.mjs";import"../../composables/usePopover.mjs";import{u as M,b as U}from"../../composables/useStateful.mjs";import{u as q,a as R,b as z}from"../../composables/useValidation.mjs";import{u as N}from"../va-date-picker/hooks/sync-prop.mjs";import{u as G}from"./hooks/range-model-value-guard.mjs";import{u as J}from"./hooks/input-text-parser.mjs";import{i as Q,a as X,b as Y}from"../va-date-picker/utils/date-utils.mjs";import{_ as Z}from"../va-date-picker/VaDatePicker.mjs";import{V as ee}from"../va-dropdown/index.mjs";import"../va-input/index.mjs";import{V as oe}from"../va-icon/index.mjs";import{_ as ae}from"../../../plugin-vue_export-helper.mjs";import{V as te}from"../va-dropdown/components/VaDropdownContent/index.mjs";import{V as re}from"../va-input/components/VaInputWrapper/VaInputWrapper.mjs";const ne=F(re,["focused","maxLength","counterValue"]),se=F(Z),le=s({name:"VaDateInput",components:{VaDropdown:ee,VaDropdownContent:te,VaDatePicker:Z,VaInputWrapper:re,VaIcon:oe},props:__spreadProps(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},T),ne),se),q),{clearValue:{type:Date,default:void 0},modelValue:{type:[Date,Array,Object,String,Number]},resetOnClose:{type:Boolean,default:!0},isOpen:{type:Boolean,default:void 0},format:{type:Function},formatDate:{type:Function,default:e=>e.toLocaleDateString()},parse:{type:Function},parseDate:{type:Function},parseValue:{type:Function},delimiter:{type:String,default:", "},rangeDelimiter:{type:String,default:" ~ "},manualInput:{type:Boolean,default:!1},color:{type:String,default:"primary"},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"calendar_today"}}),emits:[...L,...A(Z),...W,...R,...M,"update:is-open","update:text"],inheritAttrs:!1,setup(e,{emit:o,slots:a,attrs:t}){const r=l(),n=i(),{isOpen:s,resetOnClose:m}=p(e),{valueComputed:v}=U(e,o),{syncProp:f}=N(s,"is-open",o,!1),{isFocused:y,focus:b,blur:w,onFocus:k,onBlur:V}=E(r),h=u((()=>!m.value)),{valueComputed:g,reset:D}=G(v,h,e.parseValue);d(f,(e=>{e||h.value||D()}));const dateOrNothing=o=>o?e.formatDate(o):"...",{parseDateInputValue:C,isValid:P}=J(e);d(g,(()=>{P.value=!0}));const modelValueToString=o=>{if(e.format)return e.format(g.value);if(Q(o))return o.map((o=>e.formatDate(o))).join(e.delimiter);if(X(o))return e.formatDate(o);if(Y(o))return dateOrNothing(o.start)+e.rangeDelimiter+dateOrNothing(o.end);throw new Error("VaDatePicker: Invalid model value. Value should be Date, Date[] or { start: Date, end: Date | null }")},{text:j,value:I}=H(g,C,modelValueToString),x=u((()=>P.value?g.value?j.value:e.clearValue?modelValueToString(e.clearValue):"":"")),reset=()=>{v.value=e.clearValue,o("clear")},focusDatePicker=()=>{c((()=>{var e;return null==(e=n.value)?void 0:e.focusCurrentPicker()}))},focusInputOrPicker=()=>{f.value?focusDatePicker():b()},{computedError:O,computedErrorMessages:_,listeners:$,validationAriaAttributes:F}=z(e,o,reset,b),A=u((()=>!P.value&&g.value!==e.clearValue||O.value)),T=u((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(a).filter((e=>!o.includes(e)))})),{canBeCleared:W,clearIconProps:L,onFocus:M,onBlur:q}=K(e,g),R=u((()=>({name:e.icon,color:e.color,size:"small",class:"va-date-input__icon"}))),Z=u((()=>e.disabled||e.readonly?-1:0)),ee=u((()=>__spreadProps(__spreadValues({},B(e,ne).value),{focused:y.value,error:A.value,errorMessages:_.value,readonly:e.readonly||!e.manualInput}))),oe=u((()=>({focus:()=>{e.disabled||(k(),e.readonly||(M(),$.onFocus()))},blur:()=>{e.disabled||(V(),e.readonly||(q(),$.onBlur()))}}))),ae=u((()=>__spreadValues(__spreadValues({readonly:e.readonly||!e.manualInput,tabindex:e.disabled?-1:0,value:x.value,ariaLabel:e.label||"selected date",ariaRequired:e.requiredMark,ariaDisabled:e.disabled,ariaReadOnly:e.readonly},F.value),S(t,["class","style"]))));return{datePicker:n,valueText:x,valueWithoutText:I,valueComputed:g,isOpenSync:f,onInputTextChanged:({target:e})=>{const o=C(e.value);P.value&&(g.value=o)},isFocused:y,input:r,inputWrapperProps:ee,inputListeners:oe,inputAttributesComputed:ae,datePickerProps:B(e,se),filterSlots:T,canBeCleared:W,clearIconProps:L,iconProps:R,hideAndFocus:()=>{f.value=!1,b()},toggleDropdown:o=>{var a;(a=o instanceof KeyboardEvent?o:void 0,f.value||!(e.disabled||e.readonly||e.manualInput&&"Space"!==(null==a?void 0:a.code)))&&(f.value=!f.value,c(focusInputOrPicker))},showDropdown:()=>{e.disabled||e.readonly||(f.value=!0,c(focusDatePicker))},focusInputOrPicker:focusInputOrPicker,reset:reset,focus:b,blur:w,iconTabindexComputed:Z}}}),ie={class:"va-date-input"};var pe=ae(le,[["render",function _sfc_render(e,o,a,t,r,n){const s=m("va-icon"),l=m("va-input-wrapper"),i=m("va-date-picker"),p=m("va-dropdown-content"),u=m("va-dropdown");return v(),f("div",ie,[y(u,{modelValue:e.isOpenSync,"onUpdate:modelValue":o[9]||(o[9]=o=>e.isOpenSync=o),trigger:"none",anchorSelector:".va-input-wrapper__field",class:b(e.$attrs.class),style:w(e.$attrs.style),offset:[2,0],"close-on-content-click":!1,stateful:!1,disabled:e.$props.disabled},{anchor:k((()=>[V(e.$slots,"input",h(g({inputAttributes:e.inputAttributesComputed,inputWrapperProps:e.inputWrapperProps,inputListeners:e.inputListeners})),(()=>[y(l,D(e.inputWrapperProps,{onClick:e.toggleDropdown,onKeydown:[C(P(e.toggleDropdown,["stop"]),["enter"]),C(P(e.toggleDropdown,["stop"]),["space"])]}),j({default:k((()=>[I("input",D({ref:"input",class:"va-date-input__input"},e.inputAttributesComputed,x(e.inputListeners),{onChange:o[0]||(o[0]=(...o)=>e.onInputTextChanged&&e.onInputTextChanged(...o))}),null,16)])),prependInner:k((o=>[V(e.$slots,"prependInner",h(g(o))),e.$props.leftIcon?(v(),O(s,h(D({key:0},e.iconProps)),null,16)):_("",!0)])),icon:k((()=>[e.canBeCleared?(v(),O(s,D({key:0,class:"va-date-input__clear-icon",role:"button","aria-label":"reset date","aria-hiden":"false",tabindex:e.iconTabindexComputed},e.clearIconProps,{onClick:P(e.reset,["stop"]),onKeydown:[C(P(e.reset,["stop"]),["enter"]),C(P(e.reset,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"])):e.$props.leftIcon?_("",!0):(v(),O(s,D({key:1,tabindex:e.iconTabindexComputed},e.iconProps,{onClick:P(e.showDropdown,["stop"]),onKeydown:[C(P(e.showDropdown,["stop"]),["enter"]),C(P(e.showDropdown,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"]))])),_:2},[$(e.filterSlots,(o=>({name:o,fn:k((a=>[V(e.$slots,o,h(g(a)))]))})))]),1040,["onClick","onKeydown"])]))])),default:k((()=>[y(p,{onKeydown:C(P(e.hideAndFocus,["prevent"]),["esc"])},{default:k((()=>[y(i,D({ref:"datePicker"},e.datePickerProps,{modelValue:e.valueWithoutText,"onUpdate:modelValue":o[1]||(o[1]=o=>e.valueWithoutText=o),"onClick:day":o[2]||(o[2]=o=>e.$emit("click:day",o)),"onClick:month":o[3]||(o[3]=o=>e.$emit("click:month",o)),"onClick:year":o[4]||(o[4]=o=>e.$emit("click:year",o)),"onHover:day":o[5]||(o[5]=o=>e.$emit("hover:day",o)),"onHover:month":o[6]||(o[6]=o=>e.$emit("hover:month",o)),"onHover:year":o[7]||(o[7]=o=>e.$emit("hover:year",o)),"onUpdate:view":o[8]||(o[8]=o=>e.$emit("update:view",o))}),j({_:2},[$(e.$slots,((o,a)=>({name:a,fn:k((o=>[V(e.$slots,a,h(g(o)))]))})))]),1040,["modelValue"])])),_:3},8,["onKeydown"])])),_:3},8,["modelValue","class","style","disabled"])])}]]);export{pe as _};
//# sourceMappingURL=VaDateInput.mjs.map

 import './VaDateInput.css'