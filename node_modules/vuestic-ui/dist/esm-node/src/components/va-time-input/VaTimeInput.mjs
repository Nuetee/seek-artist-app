var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,n,r)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r,__spreadValues=(e,o)=>{for(var n in o||(o={}))a.call(o,n)&&__defNormalProp(e,n,o[n]);if(r)for(var n of r(o))t.call(o,n)&&__defNormalProp(e,n,o[n]);return e},__spreadProps=(e,r)=>o(e,n(r));import{defineComponent as s,shallowRef as l,computed as p,nextTick as d,resolveComponent as i,openBlock as u,createBlock as c,normalizeClass as m,normalizeStyle as f,withCtx as w,createVNode as v,mergeProps as b,withKeys as y,withModifiers as g,createSlots as h,createElementVNode as V,toHandlers as D,renderSlot as I,normalizeProps as C,guardReactiveProps as k,createCommentVNode as j,renderList as x}from"vue";import{o as P}from"../../../vendor.mjs";import{e as O,f as _}from"../../utils/child-props.mjs";import{a as S,u as K,b as T}from"../../composables/useClearable.mjs";import"colortranslator";import{u as B,a as F}from"../../composables/useFocus.mjs";import"../../composables/usePopover.mjs";import{a as $,u as A,b as W}from"../../composables/useValidation.mjs";import{u as E}from"../../composables/useSyncProp.mjs";import{u as L}from"./hooks/time-text-parser.mjs";import{u as M}from"./hooks/time-text-formatter.mjs";import{_ as q}from"../va-time-picker/VaTimePicker.mjs";import"../va-input/index.mjs";import{V as R}from"../va-icon/VaIcon.mjs";import{V as U}from"../va-dropdown/index.mjs";import{_ as z}from"../../../plugin-vue_export-helper.mjs";import{V as G}from"../va-dropdown/components/VaDropdownContent/index.mjs";import{V as H}from"../va-input/components/VaInputWrapper/VaInputWrapper.mjs";const J=O(H,["focused","maxLength","counterValue"]);var N=z(s({name:"VaTimeInput",components:{VaDropdown:U,VaDropdownContent:G,VaTimePicker:q,VaIcon:R,VaInputWrapper:H},emits:[...B,...$,...S,"update:modelValue","update:isOpen"],props:__spreadProps(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},K),J),O(q)),A),{isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}}),inheritAttrs:!1,setup(e,{emit:o,slots:n,attrs:r}){const a=l(),t=l(),[s]=E("isOpen",e,o,!1),[i]=E("modelValue",e,o),{parse:u,isValid:c}=L(e),{format:m}=M(e),f=p((()=>m(i.value||e.clearValue))),{isFocused:w,focus:v,blur:b,onFocus:y,onBlur:g}=F(a),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},{computedError:h,computedErrorMessages:V,listeners:D,validationAriaAttributes:I}=W(e,o,reset,v),{canBeCleared:C,clearIconProps:k,onFocus:j,onBlur:x}=T(e,f),S=p((()=>C.value&&f.value!==m(e.clearValue))),K=p((()=>({name:e.icon,color:e.color,size:"small"}))),B=p((()=>__spreadProps(__spreadValues({},_(e,J).value),{focused:w.value,error:h.value,errorMessages:V.value,readonly:e.readonly||!e.manualInput}))),$=p((()=>({focus:()=>{e.disabled||(y(),e.readonly||(j(),D.onFocus()))},blur:()=>{e.disabled||(g(),e.readonly||(x(),D.onBlur()))}}))),A=p((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(n).filter((e=>!o.includes(e)))})),focusTimePicker=()=>{d((()=>{var e;return null==(e=t.value)?void 0:e.focus()}))},focusInputOrPicker=()=>{s.value?focusTimePicker():v()},R=p((()=>e.disabled||e.readonly?-1:0)),U=p((()=>__spreadValues(__spreadValues({readonly:e.readonly||!e.manualInput,tabindex:e.disabled?-1:0,value:f.value,ariaLabel:e.label||"selected date",ariaRequired:e.requiredMark,ariaDisabled:e.disabled,ariaReadOnly:e.readonly},I.value),P(r,["class","style"]))));return{input:a,timePicker:t,timePickerProps:_(e,O(q)),computedInputWrapperProps:B,computedInputListeners:$,isOpenSync:s,modelValueSync:i,valueText:f,onInputTextChanged:e=>{var o;const n=null==(o=e.target)?void 0:o.value;if(!n)return reset();const r=u(n);c.value&&r?i.value=r:(i.value=void 0,c.value=!0)},canBeClearedComputed:S,iconProps:K,clearIconProps:k,filteredSlots:A,inputAttributesComputed:U,iconTabindexComputed:R,hideDropdown:()=>{s.value=!1,v()},showDropdown:()=>{e.disabled||e.readonly||(s.value=!0,d(focusTimePicker))},toggleDropdown:o=>{var n;(n=o instanceof KeyboardEvent?o:void 0,s.value||!(e.disabled||e.readonly||e.manualInput&&"Space"!==(null==n?void 0:n.code)))&&(s.value=!s.value,d(focusInputOrPicker))},reset:reset,focus:v,blur:b}}}),[["render",function _sfc_render(e,o,n,r,a,t){const s=i("va-icon"),l=i("va-input-wrapper"),p=i("va-time-picker"),d=i("va-dropdown-content"),P=i("va-dropdown");return u(),c(P,{modelValue:e.isOpenSync,"onUpdate:modelValue":o[2]||(o[2]=o=>e.isOpenSync=o),class:m(["va-time-input",e.$attrs.class]),placement:"bottom-start",trigger:"none",anchorSelector:".va-input-wrapper__field",style:f(e.$attrs.style),offset:[2,0],"close-on-content-click":!1,stateful:!1,disabled:e.$props.disabled},{anchor:w((()=>[v(l,b(e.computedInputWrapperProps,{onClick:e.toggleDropdown,onKeydown:[y(g(e.toggleDropdown,["stop"]),["enter"]),y(g(e.toggleDropdown,["stop"]),["space"])]}),h({default:w((()=>[V("input",b({ref:"input",class:"va-time-input__input"},e.inputAttributesComputed,D(e.computedInputListeners),{onChange:o[0]||(o[0]=(...o)=>e.onInputTextChanged&&e.onInputTextChanged(...o))}),null,16)])),prependInner:w((o=>[I(e.$slots,"prependInner",C(k(__spreadProps(__spreadValues({},o),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))),e.$props.leftIcon?(u(),c(s,b({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.iconProps,{onClick:g(e.showDropdown,["stop"]),onKeydown:[y(g(e.showDropdown,["stop"]),["enter"]),y(g(e.showDropdown,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"])):j("",!0)])),icon:w((()=>[e.canBeClearedComputed?(u(),c(s,b({key:0,role:"button","aria-label":"reset time","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.clearIconProps,{onClick:g(e.reset,["stop"]),onKeydown:[y(g(e.reset,["stop"]),["enter"]),y(g(e.reset,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"])):e.$props.leftIcon?j("",!0):(u(),c(s,b({key:1,role:"button",class:"va-dropdown__icons__reset","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconTabindexComputed},e.iconProps,{onClick:g(e.showDropdown,["stop"]),onKeydown:[y(g(e.showDropdown,["stop"]),["enter"]),y(g(e.showDropdown,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"]))])),_:2},[x(e.filteredSlots,(o=>({name:o,fn:w((n=>[I(e.$slots,o,C(k(__spreadProps(__spreadValues({},n),{toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))))]))})))]),1040,["onClick","onKeydown"])])),default:w((()=>[v(d,{"no-padding":"",onKeydown:y(g(e.hideDropdown,["prevent"]),["esc"]),onKeypress:y(g(e.hideDropdown,["prevent"]),["enter"])},{default:w((()=>[v(p,b({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[1]||(o[1]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1},8,["onKeydown","onKeypress"])])),_:3},8,["modelValue","class","style","disabled"])}]]);export{N as _};
//# sourceMappingURL=VaTimeInput.mjs.map
