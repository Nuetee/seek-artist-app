import{defineComponent as e,ref as i,computed as o,onMounted as a,watch as m,resolveComponent as r,openBlock as t,createBlock as s,normalizeClass as l,withCtx as n,createVNode as d,createElementBlock as p,createCommentVNode as v,createElementVNode as u,normalizeStyle as c,toDisplayString as j}from"vue";import{d as x}from"../../../services/color-config/color-functions.mjs";import{u as f}from"../../../composables/useBem.mjs";import{a as g}from"../../../composables/useFocus.mjs";import"../../../../vendor.mjs";import"../../../composables/usePopover.mjs";import"../../va-accordion/index.mjs";import"../../va-affix/index.mjs";import"../../va-alert/index.mjs";import"../../va-app-bar/index.mjs";import"../../va-avatar/index.mjs";import"../../va-backtop/index.mjs";import"../../va-badge/index.mjs";import"../../va-breadcrumbs/index.mjs";import"../../va-button-dropdown/index.mjs";import"../../va-button-group/index.mjs";import"../../va-button-toggle/index.mjs";import{V as b}from"../../va-button/index.mjs";import"../../va-card/index.mjs";import"../../va-carousel/index.mjs";import"../../va-checkbox/index.mjs";import"../../va-chip/index.mjs";import"../../va-collapse/index.mjs";import"../../va-color-indicator/index.mjs";import"../../va-color-input/index.mjs";import"../../va-color-palette/index.mjs";import"../../va-config/VaConfig.mjs";import"../../va-content/index.mjs";import"../../va-counter/index.mjs";import"../../va-data-table/index.mjs";import"../../va-date-input/index.mjs";import"../../va-date-picker/index.mjs";import"../../va-divider/index.mjs";import"../../va-dropdown/index.mjs";import"../index.mjs";import"../../va-form/index.mjs";import"../../va-hover/index.mjs";import"../../va-icon/index.mjs";import"../../va-image/index.mjs";import"../../va-infinite-scroll/index.mjs";import"../../va-inner-loading/index.mjs";import"../../va-input/index.mjs";import{V as y,a as _}from"../../va-list/index.mjs";import"../../va-modal/VaModal.mjs";import"../../va-navbar/index.mjs";import"../../va-option-list/index.mjs";import"../../va-pagination/index.mjs";import"../../va-parallax/index.mjs";import"../../va-popover/index.mjs";import"../../va-progress-bar/index.mjs";import"../../va-progress-circle/index.mjs";import"../../va-radio/index.mjs";import"../../va-rating/index.mjs";import"../../va-select/index.mjs";import"../../va-separator/VaSeparator.mjs";import"../../va-sidebar/index.mjs";import"../../va-slider/index.mjs";import"../../va-spacer/VaSpacer.mjs";import"../../va-switch/index.mjs";import"../../va-toast/index.mjs";import"../../va-tabs/index.mjs";import"../../va-time-input/index.mjs";import"../../va-time-picker/index.mjs";import"../../va-timeline/index.mjs";import"../../va-tree-view/index.mjs";import{V as F}from"../VaFileUploadUndo/index.mjs";import{_ as V}from"../../../../plugin-vue_export-helper.mjs";const k=e({name:"VaFileUploadGalleryItem",components:{VaFileUploadUndo:F,VaButton:b,VaListItem:y,VaListItemSection:_},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e,{emit:r}){const{isFocused:t,onFocus:s,onBlur:l}=g(),n=i(""),d=i(!1),p=o((()=>({backgroundColor:x(e.color,.7)}))),v=f("va-file-upload-gallery-item",(()=>({notImage:!n.value,focused:t.value,undo:d.value}))),convertToImg=()=>{if(e.file.name&&e.file.image)if(e.file.image.url)n.value=e.file.image.url;else if(e.file.image instanceof File){const i=new FileReader;i.readAsDataURL(e.file.image),i.onload=e=>{var i,o;(null==(i=e.target)?void 0:i.result).includes("image")&&(n.value=null==(o=e.target)?void 0:o.result)}}};return a(convertToImg),m((()=>e.file),convertToImg),{removed:d,isFocused:t,previewImage:n,classesComputed:v,overlayStylesComputed:p,onBlur:l,onFocus:s,removeImage:()=>{e.undo?(d.value=!0,setTimeout((()=>{d.value&&(r("remove"),d.value=!1)}),e.undoDuration)):(r("remove"),d.value=!1)},recoverImage:()=>{d.value=!1}}}}),B=["src","alt"],I={class:"va-file-upload-gallery-item__overlay"},w=["title"];var C=V(k,[["render",function _sfc_render(e,i,o,a,m,x){const f=r("va-file-upload-undo"),g=r("va-list-item-section"),b=r("va-button"),y=r("va-list-item");return t(),s(y,{class:l(["va-file-upload-gallery-item",e.classesComputed]),onFocus:e.onFocus,onBlur:e.onBlur},{default:n((()=>[e.removed&&e.undo?(t(),s(g,{key:0},{default:n((()=>[d(f,{vertical:"",onRecover:e.recoverImage},null,8,["onRecover"])])),_:1})):(t(),s(g,{key:1},{default:n((()=>[e.previewImage?(t(),p("img",{key:0,src:e.previewImage,alt:e.file.name||"",class:"va-file-upload-gallery-item__image"},null,8,B)):v("",!0),u("div",I,[u("div",{class:"va-file-upload-gallery-item__overlay-background",style:c(e.overlayStylesComputed)},null,4),e.file&&e.file.name?(t(),p("div",{key:0,class:"va-file-upload-gallery-item__name",title:e.file.name},j(e.file.name),9,w)):v("",!0),d(b,{flat:"",color:"danger",icon:"delete_outline",class:"va-file-upload-gallery-item__delete","aria-label":"remove image",onClick:e.removeImage,onFocus:e.onFocus,onBlur:e.onBlur},null,8,["onClick","onFocus","onBlur"])])])),_:1}))])),_:1},8,["class","onFocus","onBlur"])}]]);export{C as _};
//# sourceMappingURL=VaFileUploadGalleryItem.mjs.map
