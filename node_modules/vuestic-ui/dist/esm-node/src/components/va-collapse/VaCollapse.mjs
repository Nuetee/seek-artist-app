var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,a,t)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t;import{defineComponent as s,shallowRef as d,computed as n,resolveComponent as u,openBlock as c,createElementBlock as i,normalizeClass as p,createElementVNode as m,mergeProps as v,toHandlers as b,withKeys as y,renderSlot as g,normalizeProps as f,guardReactiveProps as h,createBlock as C,createCommentVNode as _,toDisplayString as x,createVNode as j,normalizeStyle as O}from"vue";import{p as S}from"../../../vendor.mjs";import{u as k}from"../../composables/useBem.mjs";import{u as F}from"../../composables/useColors.mjs";import{u as V}from"../../composables/useKeyboardOnlyFocus.mjs";import"../../composables/usePopover.mjs";import{u as A}from"../../composables/useSyncProp.mjs";import{g as P}from"../../services/utils.mjs";import{u as I}from"../../composables/useTextColor.mjs";import{a as $}from"../va-accordion/hooks/useAccordion.mjs";import{V as w}from"../va-icon/index.mjs";import{_ as B}from"../../../plugin-vue_export-helper.mjs";const K=s({name:"VaCollapse",components:{VaIcon:w},props:{modelValue:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},header:{type:String,default:""},icon:{type:String,default:""},solid:{type:Boolean,default:!1},color:{type:String,default:"background"},textColor:{type:String,default:""},colorAll:{type:Boolean,default:!1}},emits:["focus","update:modelValue"],setup(e,{emit:s,slots:u}){const c=d(),[i]=A("modelValue",e,s,!1),{getColor:p,getHoverColor:m}=F(),{accordionProps:v,toggle:b}=$(i),{textColorComputed:y}=I(),getNodeHeight=e=>"#text"===e.nodeName?(e=>{const o=document.createRange();o.selectNodeContents(e);const a=o.getBoundingClientRect();return a.bottom-a.top})(e):"#comment"===e.nodeName?0:e.clientHeight,g=n((()=>{if(!i.value||!c.value)return 0;return Array.from(c.value.childNodes).reduce(((e,o)=>e+getNodeHeight(o)),0)})),{hasKeyboardFocus:f,keyboardFocusListeners:h}=V(),getTransition=()=>{const e=g.value/1e3*.2;return`${e>.2?e:.2}s`},C=n(P),_=n((()=>`header-${C.value}`)),x=n((()=>`panel-${C.value}`)),j=n((()=>e.disabled?-1:0)),O=n((()=>({id:_.value,tabindex:j.value,"aria-controls":x.value,"aria-expanded":i.value,"aria-disabled":e.disabled,role:"button"}))),w=k("va-collapse",(()=>{return s=((e,o)=>{for(var a in o||(o={}))l.call(o,a)&&__defNormalProp(e,a,o[a]);if(t)for(var a of t(o))r.call(o,a)&&__defNormalProp(e,a,o[a]);return e})({},S(e,["disabled","solid"])),d={expanded:i.value,active:e.solid&&i.value,popout:!(!v.value.popout||!i.value),inset:!(!v.value.inset||!i.value)},o(s,a(d));var s,d}));return{body:c,height:g,toggle:b,computedModelValue:i,hasKeyboardFocus:f,keyboardFocusListeners:h,textColorComputed:y,headerIdComputed:_,headerAttributes:O,panelIdComputed:x,tabIndexComputed:j,computedClasses:w,headerStyle:n((()=>({paddingLeft:e.icon&&0,color:y.value,backgroundColor:e.color?p(e.color):""}))),contentStyle:n((()=>{var o;const a=i.value&&!!(null==(o=u.default)?void 0:o.call(u)[0]);return{visibility:a?"visible":"hidden",height:`${g.value}px`,transitionDuration:getTransition(),background:a&&e.color&&e.colorAll?m(p(e.color)):""}}))}}}),L={class:"va-collapse__header__text"},N=["id","aria-labelledby"];var M=B(K,[["render",function _sfc_render(e,o,a,t,l,r){const s=u("va-icon");return c(),i("div",{class:p(["va-collapse",e.computedClasses])},[m("div",v({class:"va-collapse__header-wrapper"},b(e.keyboardFocusListeners),{onFocus:o[0]||(o[0]=o=>e.$emit("focus")),onClick:o[1]||(o[1]=(...o)=>e.toggle&&e.toggle(...o)),onKeydown:[o[2]||(o[2]=y(((...o)=>e.toggle&&e.toggle(...o)),["enter"])),o[3]||(o[3]=y(((...o)=>e.toggle&&e.toggle(...o)),["space"]))]}),[g(e.$slots,"header",f(h({value:e.computedModelValue,hasKeyboardFocus:e.hasKeyboardFocus,bind:e.headerAttributes,attributes:e.headerAttributes})),(()=>[m("div",v(e.headerAttributes,{class:"va-collapse__header",style:e.headerStyle}),[e.icon?(c(),C(s,{key:0,class:"va-collapse__header__icon",name:e.icon,color:e.textColorComputed},null,8,["name","color"])):_("",!0),m("div",L,x(e.header),1),j(s,{class:"va-collapse__header__icon",name:e.computedModelValue?"expand_less":"expand_more",color:e.textColorComputed},null,8,["name","color"])],16)]))],16),m("div",{ref:"body",class:"va-collapse__body",role:"region",style:O(e.contentStyle),id:e.panelIdComputed,"aria-labelledby":e.headerIdComputed},[g(e.$slots,"default")],12,N)],2)}]]);export{M as _};
//# sourceMappingURL=VaCollapse.mjs.map

 import './VaCollapse.css'